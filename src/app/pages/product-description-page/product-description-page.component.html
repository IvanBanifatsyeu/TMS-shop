<main class="product-description-page">
  <section class="product-description-page__product product">
    <div class="product__img-conteiner img-conteiner">
      <img [src]="imgUrl" alt="img of product" class="img-conteiner__image" />
    </div>
    <div class="product__info info">
      <div class="info__model-curColor model-curColor">
        <h1 class="model-curColor__model">{{ product?.model }}</h1>
        <p class="model-curColor__curColor">({{ product?.curColor }})</p>
      </div>
      <div class="info__status-bar status-bar">
        @if(isFavorite_s()) {
        <svg class="status-bar__favorit-icon favorit-icon" icon="fav"></svg>
        } @else {
        <div class="status-bar__favorit-icon-dummy favorit-icon-dummy"></div>
        } @if(isAddedToCart_s()) {
        <svg class="status-bar__inCart-icon inCart-icon" icon="in-cart"></svg>
        }
      </div>
      <div class="info__rating-wrapper rating-wrapper">
        <p class="rating-wrapper__rating">{{ product?.rating }}</p>
        <app-stars-generator [rating]="product?.rating">
          class="rating-wrapper__stars" ></app-stars-generator
        >
      </div>
      <p class="info__price">{{ product?.price | currency }}</p>
      <div class="info__colors colors">
        <p class="colors__title">
          {{ "PRODUCT_DESCRIPTION_PAGE.COLOR" | translate }}
        </p>
        <div class="colors__colors-list colors-list">
          @for(color of product?.color; track $index) {
          <svg
            icon="color"
            class="colors-list__color-icon color-icon"
            [style.color]="'var(--svg-' + color + ')'"
            (click)="setSelectedColor(color, $event)"
            [ngClass]="{ selectedColor: this.selectedColor_s() === color }"
          ></svg>
          }
        </div>
      </div>
      <div class="info__sizes sizes">
        <p class="sizes__title">
          {{ "PRODUCT_DESCRIPTION_PAGE.SIZE" | translate }}
        </p>
        <div class="sizes__sizes-list sizes-list">
          @for(size of product?.sizes; track $index) {
          <div
            class="sizes-list__size"
            (click)="setSelectedSize(size, $event)"
            [ngClass]="{ selectedSize: this.selectedSize_s() === size }"
          >
            {{ size }}
          </div>
          }
        </div>
      </div>
      <div class="info__quantity-price-selector quantity-price-selector">
        <div class="quantity-price-selector__quantity-wrapper quantity-wrapper">
          <p class="quantity-wrapper__title">выбирите количество</p>
          <div class="quantity-wrapper__choice-wrapper choice-wrapper">
            <button class="choice-wrapper__button" (click)="decreaseQuantity()">-</button>
            <div class="choice-wrapper__number">{{this.selectedQuantity_s()}}</div>
            <button class="choice-wrapper__button" (click)="increaseQuantity()">+</button>
          </div>
        </div>
        <div class="quantity-price-selector__price">
          <p class="quantity-price-selector__title">цена заказа</p>
          <div>{{this.orderSum_sc()}}</div>
        </div>
      </div>
      <div class="info__buttons buttons">
        <button
          class="buttons__button"
          (click)="toggleFavorit(product, $event)"
        >
          {{
            (isFavorite_s()
              ? "PRODUCT_DESCRIPTION_PAGE.REMOVE_FROM_WISHLIST"
              : "PRODUCT_DESCRIPTION_PAGE.ADD_TO_WISHLIST"
            ) | translate
          }}
        </button>
        <button
          class="buttons__button"
          [disabled]="
            this.selectedColor_s() === '' || this.selectedSize_s() === ''
          "
          (click)="addToCart(product, $event)"
        >
          {{ "PRODUCT_DESCRIPTION_PAGE.ADD_TO_CART" | translate }}
        </button>
      </div>
      <div class="info__description description">
        <h2 class="description__title">
          {{ "PRODUCT_DESCRIPTION_PAGE.PRODUCT_DESCRIPTION" | translate }}
        </h2>
        <p class="description__text">{{ product?.description }}</p>
      </div>
    </div>
  </section>
</main>
