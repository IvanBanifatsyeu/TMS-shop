<div class="shopping-cart">
  <h1 class="shopping-cart__title">Shopping Cart</h1>
  <svg
    class="shopping-cart__close-icon"
    icon="cart-close"
    (click)="hideCartPopup()"
  ></svg>
  <button
    class="shopping-cart__remove-btn remove-btn"
    [class.showSwitcher]="this.listCart_s().length"
    (click)="removeAllFromCart($event)"
  >
    remove all
  </button>
  @if(!this.listCart_s().length) {
  <p class="shopping-cart__empty-cart">–≤–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞ ü•∫</p>
  }
  <div class="shopping-cart__card-list card-list">
    @for (item of this.listCart_s() ; track item.id) {
    <div class="cart-list__card-wrapper card-wrapper">
      <app-product-card
        [product]="item"
        class="product-card--inCart"
      ></app-product-card>
      <div class="card-wrapper__aside aside">
        <button
          class="aside__remove-btn remove-btn remove-btn--inCart"
          (click)="removeFromCart(item, $event)"
        >
          Remove
        </button>
        <div class="aside__quantity-control quantity-control">
          @if(!iSshowQuantityPanel()) {
          <div class="quantity-control__quantity-conteiner quantity-conteiner">
            <p class="quantity-conteiner__quantity-num">
              –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ - {{ item.quantity }}—à—Ç
            </p>
            <button
              class="quantity-conteiner__button-show-control"
              (click)="showPanelContol($event, item)"
            >
              –∏–∑–º–µ–Ω–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
            </button>
          </div>
          } @else {
          <div class="quantity-control__choice-wrapper choice-wrapper">
            <div class="choice-wrapper__choice-contrall choice-contrall">
              <button
                class="choice-contrall__button"
                (click)="decrementCounter()"
              >
                -
              </button>
              <div class="choice-contrall__number">
                {{ this.counterQuantity_s() }}
              </div>
              <button
                class="choice-contrall__button"
                (click)="incrementCounter()"
              >
                +
              </button>
            </div>

            <button class="choice-contrall__apply-btn" (click)="applyQuantity($event, item)">–ø—Ä–∏–º–µ–Ω–∏—Ç—å</button>
          </div>
          }
        </div>
        <div class="aside__total-price total-price">
          <div class="total-price__total-price-num">
            –∏—Ç–æ–≥–æ -
            {{
              item.quantity && item.price
                ? (item.quantity * item.price | number : "1.2-2" | currency)
                : "error calculation üíÄ "
            }}
          </div>
          <button class="total-price__pay-btn">–∑–∞–∫–∞–∑–∞—Ç—å</button>
        </div>
      </div>
    </div>
    }
  </div>
</div>
